drop table if exists bank_card;
drop table if exists users;

CREATE TABLE bank_card
(
    id       BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    number   VARCHAR(255),
    valid_to date,
    ccv      varchar(3),
    user_id  BIGINT
);

CREATE TABLE users
(
    id         BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    first_name VARCHAR(255),
    last_name  VARCHAR(255)
);

ALTER TABLE bank_card
    ADD CONSTRAINT FK_BANK_CARD_ON_USER FOREIGN KEY (user_id) REFERENCES users (id);


INSERT INTO users (id, first_name, last_name)
VALUES ( 1,'Mr.', 'Фомичёва')
     , ( 2,'Mr.', 'Кириллова')
     , ( 3,'Mrs.', 'Богданов')
     , ( 4,'Prof.', 'Поляков')
     , ( 5,'Prof.', 'Симонов')
     , ( 6,'Mrs.', 'Мартынова')
     , ( 7,'Ms.', 'Федотов')
     , ( 8,'Mr.', 'Кузьмина')
     , ( 9,'Prof.', 'Субботин')
     , ( 10,'Prof.', 'Большаков')
     , ( 11,'Dr.', 'Исакова')
     , ( 12,'Mrs.', 'Зайцева')
     , ( 13,'Prof.', 'Королёва')
     , ( 14,'Miss', 'Сысоева')
     , ( 15,'Prof.', 'Пестов')
     , ( 16,'Prof.', 'Копылов')
     , ( 17,'Prof.', 'Мухина')
     , ( 18,'Ms.', 'Воронова')
     , ( 19,'Dr.', 'Воронцова')
     , ( 20,'Prof.', 'Родионова')
     , ( 21,'Dr.', 'Максимов')
     , ( 22,'Prof.', 'Шашкова')
     , ( 23,'Dr.', 'Горбунов')
     , ( 24,'Dr.', 'Ермаков')
     , ( 25,'Miss', 'Марков')
     , ( 26,'Prof.', 'Макарова')
     , ( 27,'Miss', 'Ершова')
     , ( 28,'Dr.', 'Карпов')
     , ( 29,'Dr.', 'Жуков')
     , ( 30,'Prof.', 'Назарова');


INSERT INTO bank_card (id, user_id, number, valid_to, ccv) VALUES
( 1, 1, '4929994640171199', '1970-06-03', '004'),
( 2, 1, '4751854689200783', '1978-02-04', '663'),
( 3, 1, '4532589829918912', '2012-09-20', '999'),
( 4, 2, '3589603225077845', '1975-12-25', '669'),
( 5, 3, '2720092935189615', '2000-10-12', '118'),
( 6, 6, '5542301589873377', '1983-10-09', '442'),
( 7, 7, '4916587496495269', '1996-07-28', '005'),
( 8, 8, '4485711406141679', '1985-03-18', '668'),
( 9, 9, '5404157077433307', '2000-11-10', '118'),
( 10, 10, '2449925455481591', '2005-06-01', '332'),
( 11, 11, '2323319590169827', '2013-06-02', '339'),
( 12, 12, '4532622866872203', '1995-11-26', '885'),
( 13, 13, '6011360452287172', '2014-12-23', '223'),
( 14, 14, '4916647951383242', '1977-05-12', '997'),
( 15, 15, '4485524862652', '2003-11-21', '227'),
( 16, 16, '4485269095658107', '1974-06-20', '997'),
( 17, 17, '5133961610951396', '1982-06-23', '005'),
( 18, 18, '3589119561926818', '2005-05-08', '553'),
( 19, 19, '4539745588212516', '2011-08-05', '000'),
( 20, 20, '4716660704623220', '2004-10-10', '887'),
( 21, 21, '6011074430313881', '1996-02-15', '999'),
( 22, 22, '2503019684417999', '2004-04-22', '881'),
( 23, 23, '4716341097563', '2001-01-09', '229'),
( 24, 24, '342767301798410', '2016-05-27', '553'),
( 25, 25, '4929089456293', '1986-08-23', '448'),
( 26, 26, '3589185523100875', '1981-11-07', '447'),
( 27, 27, '4539111885388527', '2015-02-14', '881'),
( 28, 28, '4485126943648195', '1999-05-30', '995'),
( 29, 29, '4539836626141716', '1970-04-17', '331'),
( 30, 30, '5394492147747051', '1979-01-23', '551');

